{"ast":null,"code":"import { __rest } from 'tslib';\nimport { axisBox, delta } from '../../utils/geometry/index.js';\nimport { isMotionValue } from '../../value/utils/is-motion-value.js';\nimport { checkIfControllingVariants, resolveVariantFromProps } from './variants.js';\nimport { isAnimationControls } from '../../animation/animation-controls.js';\nimport { isForcedMotionValue } from '../../motion/utils/is-forced-motion-value.js';\n\nvar createProjectionState = function createProjectionState() {\n  return {\n    isEnabled: false,\n    isTargetLocked: false,\n    target: axisBox(),\n    targetFinal: axisBox()\n  };\n};\n\nfunction createVisualState(props, parent, blockInitialAnimation) {\n  var style = props.style;\n  var values = {};\n\n  for (var key in style) {\n    if (isMotionValue(style[key])) {\n      values[key] = style[key].get();\n    } else if (isForcedMotionValue(key, props)) {\n      values[key] = style[key];\n    }\n  }\n\n  var initial = props.initial,\n      animate = props.animate;\n  var isControllingVariants = checkIfControllingVariants(props);\n  var isVariantNode = isControllingVariants || props.variants;\n\n  if (parent && isVariantNode && !isControllingVariants && props.inherit !== false) {\n    var context = parent.getVariantContext();\n\n    if (context) {\n      initial !== null && initial !== void 0 ? initial : initial = context.initial;\n      animate !== null && animate !== void 0 ? animate : animate = context.animate;\n    }\n  }\n\n  var initialToSet = blockInitialAnimation || initial === false ? animate : initial;\n\n  if (initialToSet && typeof initialToSet !== \"boolean\" && !isAnimationControls(initialToSet)) {\n    var list = Array.isArray(initialToSet) ? initialToSet : [initialToSet];\n    list.forEach(function (definition) {\n      var resolved = resolveVariantFromProps(props, definition);\n      if (!resolved) return;\n\n      var transitionEnd = resolved.transitionEnd,\n          transition = resolved.transition,\n          target = __rest(resolved, [\"transitionEnd\", \"transition\"]);\n\n      for (var key in target) {\n        values[key] = target[key];\n      }\n\n      for (var key in transitionEnd) {\n        values[key] = transitionEnd[key];\n      }\n    });\n  }\n\n  return values;\n}\n\nfunction createLayoutState() {\n  return {\n    isHydrated: false,\n    layout: axisBox(),\n    layoutCorrected: axisBox(),\n    treeScale: {\n      x: 1,\n      y: 1\n    },\n    delta: delta(),\n    deltaFinal: delta(),\n    deltaTransform: \"\"\n  };\n}\n\nvar zeroLayout = createLayoutState();\nexport { createLayoutState, createProjectionState, createVisualState, zeroLayout };","map":null,"metadata":{},"sourceType":"module"}